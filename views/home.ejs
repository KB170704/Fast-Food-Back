<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Admin Dashboard</title>

    <!-- Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>

    <!-- AlpineJS -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.10.3/dist/cdn.min.js" defer></script>

    <!-- Swiper -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>

    <!-- Custom CSS -->
    <style>
        /* General Card Styling */
        .card {
            background: #fff;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
        }

        /* Menu Item Card - Compact */
        .menu-card {
            padding: 0.75rem; /* smaller padding */
        }

        .menu-card h3 {
            font-size: 1rem;
            line-height: 1.3;
        }

        .menu-card p {
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }

        /* Image size tweak */
        .menu-card img {
            height: 120px; /* smaller image */
            object-fit: cover;
            width: 100%;
        }
    </style>
</head>

<body class="bg-gray-100 font-sans">
<div class="flex">
    <!-- Sidebar -->
    <div class="sidebar w-64 fixed bg-gray-900 text-white h-screen shadow-lg flex flex-col">
        <h2 class="text-2xl font-bold p-6 border-b border-gray-800">📊 Dashboard</h2>
        <nav class="flex-1">
            <a href="/home" class="block px-6 py-3 hover:bg-gray-700">🏠 Home</a>
            <a href="#menu" class="block px-6 py-3 hover:bg-gray-700">🍽️ Menu</a>
            <a href="#users" class="block px-6 py-3 hover:bg-gray-700">👥 Users</a>
            <a href="#contacts" class="block px-6 py-3 hover:bg-gray-700">📩 Contacts</a>
            <a href="#orders" class="block px-6 py-3 hover:bg-gray-700">💰 Orders</a>
            <a href="/charges" class="block px-6 py-3 hover:bg-green-600">Charges</a>
            <a href="/" class="block px-6 py-3 hover:bg-green-600">🔑 Login</a>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="ml-64 w-full p-8">
        <!-- Header -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-gray-800">Welcome, Admin 👋</h1>
            <p class="text-gray-500">Monitor your restaurant activity at a glance</p>
        </div>

        <!-- Stats Overview -->
        <div class="grid gap-6 md:grid-cols-4 mb-10">
            <div class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition">
                <h2 class="text-sm text-gray-500">Menu Items</h2>
                <p class="text-2xl font-bold text-blue-700"><%= menuItems.length %></p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition">
                <h2 class="text-sm text-gray-500">Users</h2>
                <p class="text-2xl font-bold text-green-700"><%= users.length %></p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition">
                <h2 class="text-sm text-gray-500">Contacts</h2>
                <p class="text-2xl font-bold text-yellow-600"><%= contacts.length %></p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow hover:shadow-lg transition">
                <h2 class="text-sm text-gray-500">Orders</h2>
                <p class="text-2xl font-bold text-orange-600"><%= orders.length %></p>
            </div>
        </div>

        <!-- Menu Section -->
        <section id="menu" class="card mb-12">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-semibold text-blue-800">🍽️ Menu Items</h2>
                <div class="space-x-2">
                    <a href="/menu" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">📃 View All</a>
                    <a href="/menu/create" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">➕ Add
                        New</a>
                </div>
            </div>
            <% if (menuItems.length === 0) { %>
                <p class="text-gray-600">No menu items available.</p>
            <% } else { %>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <% menuItems.forEach(item => { %>
                        <div class="bg-white rounded-xl shadow hover:shadow-lg transition menu-card">
                            <h3 class="text-blue-700 font-bold"><%= item.Name %></h3>
                            <p>💵 ₹<%= item.price %> → ₹<%= item.finalPrice %></p>
                            <p>Discount: <%= item.discount %>%</p>
                            <span class="bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded-full inline-block">
                                    <%= item.category %>
                                </span>
                            <p>Type: <%= item.type %>, <%= item.unitNumber %> <%= item.unit %></p>
                            <p>⏱ <%= item.deliveryTime %> mins</p>
                            <p>🛒 <%= item.shelfLife %></p>
                        </div>
                    <% }) %>
                </div>
            <% } %>
        </section>

        <!-- Users Section -->
        <section id="users" class="card mb-12">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-semibold text-blue-800">👥 Registered Users</h2>
                <div>
                    <a href="/user/all" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">📋 View</a>
                    <a href="/user/add" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">➕ Add
                        User</a>
                </div>
            </div>
            <% if (users.length === 0) { %>
                <p class="text-gray-600">No users registered yet.</p>
            <% } else { %>
                <div class="overflow-auto rounded-xl shadow">
                    <table class="w-full text-sm text-left">
                        <thead class="bg-blue-100 text-blue-800">
                        <tr>
                            <th class="px-4 py-2">Name</th>
                            <th class="px-4 py-2">Email</th>
                            <th class="px-4 py-2">Contact</th>
                            <th class="px-4 py-2">Role</th>
                            <th class="px-4 py-2">Registered</th>
                            <th class="px-4 py-2">Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                        <% users.forEach(user => { %>
                            <tr class="border-b hover:bg-gray-50">
                                <td class="px-4 py-2 font-semibold"><%= user.firstName %> <%= user.lastName %></td>
                                <td class="px-4 py-2"><%= user.email %></td>
                                <td class="px-4 py-2"><%= user.contact %></td>
                                <td class="px-4 py-2 capitalize"><%= user.role %></td>
                                <td class="px-4 py-2"><%= new Date(user.createdAt).toLocaleDateString() %></td>
                                <td class="px-4 py-2 flex gap-2">
                                    <a href="/user/edit/<%= user._id %>"
                                       class="bg-yellow-400 px-3 py-1 rounded text-sm">✏️</a>
                                    <a href="/user/delete/<%= user._id %>"
                                       onclick="return confirm('Delete this user?');"
                                       class="bg-red-500 px-3 py-1 text-white rounded text-sm">🗑️</a>
                                </td>
                            </tr>
                        <% }) %>
                        </tbody>
                    </table>
                </div>
            <% } %>
        </section>

        <!-- Contacts Section -->
        <section id="contacts" class="card mb-12">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-semibold text-blue-800 mb-6">📨 Contact Submissions</h2>
                <a href="/Contact" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">📋 View</a>
            </div>
            <% if (contacts.length === 0) { %>
                <p class="text-gray-600">No contact submissions yet.</p>
            <% } else { %>
                <% contacts.forEach(contact => { %>
                    <div class="bg-white p-4 rounded-lg shadow mb-4">
                        <p><strong>Name:</strong> <%= contact.name %></p>
                        <p><strong>Email:</strong> <%= contact.email %></p>
                        <p><strong>Message:</strong> <span class="text-sm text-gray-700"><%= contact.message %></span>
                        </p>
                        <p class="text-xs text-gray-500 mt-2">📅 Submitted
                            at: <%= new Date(contact.createdAt).toLocaleString() %></p>
                    </div>
                <% }) %>
            <% } %>
        </section>

        <!-- Orders Section -->
        <section id="orders" class="card mb-12">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-semibold text-orange-700 mb-6">💰 Payment Orders</h2>
                <a href="/Payment/all" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">📋 View</a>
            </div>
            <% if (orders.length === 0) { %>
                <p class="text-gray-600">No orders yet.</p>
            <% } else { %>
                <div class="overflow-auto rounded-xl shadow">
                    <table class="w-full text-sm">
                        <thead class="bg-orange-100 text-orange-800">
                        <tr>
                            <th class="p-3 text-left">Name</th>
                            <th class="p-3 text-left">Email</th>
                            <th class="p-3 text-left">Address</th>
                            <th class="p-3 text-left">Payment</th>
                            <th class="p-3 text-left">Amount</th>
                        </tr>
                        </thead>
                        <tbody>
                        <% orders.forEach(order => { %>
                            <tr class="border-b hover:bg-gray-50">
                                <td class="p-3"><%= order.firstName %></td>
                                <td class="p-3"><%= order.email %></td>
                                <td class="p-3"><%= order.address %></td>
                                <td class="p-3"><%= order.paymentMethod %></td>
                                <td class="p-3 font-bold text-green-600">₹<%= order.totalAmount.toFixed(2) %></td>
                            </tr>
                        <% }) %>
                        </tbody>
                    </table>
                </div>
            <% } %>
        </section>
    </div>
</div>

<!-- Swiper Init -->
<script>
    document.querySelectorAll('.mySwiper').forEach((swiper) => {
        new Swiper(swiper, {
            loop: true,
            slidesPerView: 1,
            pagination: {
                el: swiper.querySelector('.swiper-pagination'),
                clickable: true
            },
        });
    });
</script>
</body>
</html>
