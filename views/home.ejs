<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Admin Dashboard</title>
    <link
            href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
            rel="stylesheet"
    />
    <script
            src="https://cdn.jsdelivr.net/npm/alpinejs@3.10.3/dist/cdn.min.js"
            defer
    ></script>
    <style>
        body {
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        }

        .sidebar {
            width: 250px;
            background-color: #1f2937;
            min-height: 100vh;
            color: white;
        }

        .sidebar a {
            display: block;
            padding: 12px 20px;
            color: white;
            text-decoration: none;
        }

        .sidebar a:hover {
            background-color: #374151;
        }

        .content {
            margin-left: 250px;
            padding: 2rem;
        }

        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
    </style>
</head>
<body class="bg-gray-100">
<div class="flex">
    <!-- Sidebar -->
    <div class="sidebar fixed">
        <h2 class="text-2xl font-bold p-6 border-b border-gray-700">
            Dashboard
        </h2>
        <nav>
            <a href="/">üè† Home</a>
            <a href="#menu">üçΩÔ∏è Menu</a>
            <a href="#users">üë• Users</a>
            <a href="#contacts">üì© Contacts</a>
            <a href="#orders">üí∏ Orders</a>
            <a href="http://localhost:3000/">üè† front end</a>
            <a href="/login">Login</a>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="content w-full">

        <!-- Menu Section -->
        <!-- Include Swiper CSS & JS -->
        <link
                rel="stylesheet"
                href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"
        />
        <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
        <section id="menu" class="card mb-10">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold text-blue-800">üçΩÔ∏è Menu Items</h2>
                <a href="/menu" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Menu</a>
                <div class="space-x-2">
                    <a href="/menu/create" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">+ Add
                        New</a>
                </div>
            </div>

            <% if (menuItems.length === 0) { %>
                <p class="text-gray-600">No menu items found.</p>
            <% } else { %>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <% menuItems.forEach(item => { %>
                        <div class="bg-white rounded-lg shadow p-4">

                            <!-- Swiper Slider for multiple photos -->
                            <% if (item.photos && item.photos.length > 0) { %>
                                <div class="swiper mySwiper mb-3">
                                    <div class="swiper-wrapper">
                                        <% item.photos.forEach(photo => { %>
                                            <div class="swiper-slide">
                                                <img src="<%= photo %>" alt="<%= item.Name %>"
                                                     class="w-full h-40 object-cover rounded"/>
                                            </div>
                                        <% }) %>
                                    </div>
                                    <!-- Add navigation -->
                                    <div class="swiper-button-next"></div>
                                    <div class="swiper-button-prev"></div>
                                    <!-- Add pagination -->
                                    <div class="swiper-pagination"></div>
                                </div>
                            <% } %>

                            <!-- Item Details -->
                            <h3 class="text-lg font-bold text-blue-700"><%= item.Name %></h3>
                            <p class="text-sm font-semibold mt-1">Price: ‚Çπ<%= item.price %> | Final Price:
                                ‚Çπ<%= item.finalPrice %></p>
                            <p class="text-xs mt-1">Discount: <%= item.discount %>%</p>
                            <p class="text-xs mt-1 bg-blue-100 text-blue-800 inline-block px-2 py-1 rounded-full">
                                Category: <%= item.category %></p>
                            <p class="text-xs mt-1">Type: <%= item.type %></p>
                            <p class="text-xs mt-1">Unit: <%= item.unitNumber %> <%= item.unit %></p>
                            <p class="text-xs mt-1">Delivery Time: <%= item.deliveryTime %> mins</p>
                            <p class="text-xs mt-1">Shelf Life: <%= item.shelfLife %></p>

                        </div>
                    <% }) %>
                </div>
            <% } %>
        </section>
        <!-- Swiper Initialization -->
        <script>
            const swipers = document.querySelectorAll('.mySwiper');
            swipers.forEach(swiperEl => {
                new Swiper(swiperEl, {
                    loop: true,
                    slidesPerView: 1,
                    navigation: false,
                    pagination: false,
                });
            });
        </script>

        <!-- User Section -->
        <section id="users" class="card mb-10">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold text-blue-800">
                    üë• Registered Users
                </h2>
                <a href="/user/all" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">User</a>
                <a
                        href="/user/add"
                        class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"
                >+ Add New User</a
                >
            </div>
            <% if (users.length === 0) { %>
                <p class="text-gray-600">No users registered yet.</p>
            <% } else { %>
                <div class="overflow-auto">
                    <table class="min-w-full bg-white rounded shadow">
                        <thead class="bg-blue-100 text-blue-800">
                        <tr>
                            <th class="px-4 py-2 text-left">Name</th>
                            <th class="px-4 py-2 text-left">Email</th>
                            <th class="px-4 py-2 text-left">Contact</th>
                            <th class="px-4 py-2 text-left">Role</th>
                            <th class="px-4 py-2 text-left">Registered At</th>
                            <th class="px-4 py-2 text-left">Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                        <% users.forEach(user => { %>
                            <tr class="border-b hover:bg-gray-50">
                                <td class="px-4 py-2">
                                    <%= user.firstName %> <%= user.lastName %>
                                </td>
                                <td class="px-4 py-2"><%= user.email %></td>
                                <td class="px-4 py-2"><%= user.contact %></td>
                                <td class="px-4 py-2 capitalize"><%= user.role %></td>
                                <td class="px-4 py-2">
                                    <%= new Date(user.createdAt).toLocaleDateString() %>
                                </td>
                                <td class="px-4 py-2 flex gap-2">
                                    <a
                                            href="/user/edit/<%= user._id %>"
                                            class="bg-yellow-400 text-black px-3 py-1 rounded hover:bg-yellow-500 text-sm"
                                    >‚úèÔ∏è Edit</a
                                    >
                                    <a
                                            href="/user/delete/<%= user._id %>"
                                            class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 text-sm"
                                            onclick="return confirm('Are you sure you want to delete this user?');"
                                    >üóëÔ∏è Delete</a
                                    >
                                </td>
                            </tr>
                        <% }) %>
                        </tbody>
                    </table>
                </div>
            <% } %>
        </section>

        <!-- Contact Section -->
        <section id="contacts" class="card mb-10">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold text-blue-800 mb-4">
                    üì® Contact Submissions
                </h2>
                <a href="/contact" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">contacts</a>
            </div>
            <% contacts.forEach(contact => { %>
                <div class="bg-white rounded shadow p-4 mb-4">
                    <p><strong>Name:</strong> <%= contact.name %></p>
                    <p><strong>Email:</strong> <%= contact.email %></p>
                    <p>
                        <strong>Message:</strong>
                        <span class="block text-sm text-gray-700 mt-1"
                        ><%= contact.message %></span
                        >
                    </p>
                    <p class="text-xs text-gray-500 mt-2">
                        Submitted at: <%= new Date(contact.createdAt).toLocaleString() %>
                    </p>
                </div>
            <% }); %>
        </section>

        <!-- Orders Section -->
        <section id="orders" class="card mb-10">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold text-blue-800 mb-4">
                    üí∞ Payment Orders
                </h2>
                <a
                        href="/payment/all"
                        class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"
                >Payment</a
                >
            </div>
            <% if (orders.length === 0) { %>
                <p class="text-gray-600">No orders found.</p>
            <% } else { %>
                <div class="overflow-auto">
                    <table class="min-w-full bg-white rounded shadow">
                        <thead class="bg-orange-100 text-orange-800">
                        <tr>
                            <th class="p-3 text-left">Name</th>
                            <th class="p-3 text-left">Email</th>
                            <th class="p-3 text-left">Address</th>
                            <th class="p-3 text-left">Payment</th>
                            <th class="p-3 text-left">Amount</th>
                        </tr>
                        </thead>
                        <tbody>
                        <% orders.forEach(order => { %>
                            <tr class="border-b hover:bg-gray-50">
                                <td class="p-3"><%= order.firstName %></td>
                                <td class="p-3"><%= order.email %></td>
                                <td class="p-3"><%= order.address %></td>
                                <td class="p-3"><%= order.paymentMethod %></td>
                                <td class="p-3">‚Çπ<%= order.totalAmount.toFixed(2) %></td>
                            </tr>
                        <% }) %>
                        </tbody>
                    </table>
                </div>
            <% } %>
        </section>

    </div>
</div>
</body>
</html>
